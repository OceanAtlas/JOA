/* * $Id: StnEditorCell.java,v 1.1 2005/10/18 23:42:19 oz Exp $ * */package javaoceanatlas.ui.widgets;import javaoceanatlas.utility.*;import javaoceanatlas.classicdatamodel.Bottle;import javaoceanatlas.resources.JOAConstants;public class StnEditorCell {  private float mValue;  private short mQC;  private int mVar;  private short mQCStd;  private short mOrigQCStd;  private short mPrecision;  private Bottle mBottle;  private float mOrigValue;  private short mOrigQCValue;  private boolean mCellEdited = false;  public StnEditorCell(Bottle bh, int v, short qcstd, short prec) {    mBottle = bh;    mVar = v;    mValue = mBottle.mDValues[mVar];    mOrigValue = mValue;    mQC = mBottle.mQualityFlags[mVar];    mOrigQCValue = mQC;    mQCStd = qcstd;    mOrigQCStd = qcstd;    mPrecision = prec;  }  public String toString() {    return JOAFormulas.formatDouble(mValue, mPrecision, false);  }  public float getValue() {    return mValue;  }  public void setValue(float f) {    mBottle.mDValues[mVar] = f;  }  public void setNewValue(float f) {    mValue = f;    setEdited(true);  }  public short getQCValue() {    return mQC;  }  public void setQCValue(short s) {    mBottle.mQualityFlags[mVar] = s;  }  public void setNewQCValue(short s, short qcstd) {    if (mQCStd != JOAConstants.WOCE_QC_STD && mQCStd != JOAConstants.IGOSS_QC_STD) {      // this is assigning a QC code to a section without QC code      mQCStd = qcstd;      mQC = s;      setEdited(true);    }    else {      mQC = s;      setEdited(true);    }  }  public short getQCStd() {    return mQCStd;  }  public short getPrecision() {    return mPrecision;  }  public void setEdited(boolean b) {    mCellEdited = b;  }  public boolean isEdited() {    return mCellEdited;  }  public boolean isQCStdChanged() {    return mQCStd == mOrigQCStd;  }  public void updateCellValues() {    this.setValue(mValue);    this.setQCValue(mQC);  }  public void revertCellValues() {    mQC = mOrigQCValue;    mValue = mOrigValue;    mCellEdited = false;  }}